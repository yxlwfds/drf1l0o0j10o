FROM python:3.8.5-alpine
apk add gcc g++ make cmake gfortran libffi-dev openssl-dev libtool
RUN pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple/
RUN pip install --upgrade pip

COPY ./requirements.txt .
RUN pip install -r requirements.txt

ENV PYTHONUNBUFFERED 1
WORKDIR /myproject
COPY . /myproject

COPY ./entrypoint.sh /
RUN chmod +x /entrypoint.sh
ENTRYPOINT ["sh", "/entrypoint.sh"]
